# üîê Fragment API Setup Guide

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Fragment API –¥–ª—è –ø–æ–∫—É–ø–∫–∏ Telegram Stars.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **KYC-–≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç** –Ω–∞ Fragment.com
2. **–î–æ—Å—Ç—É–ø –∫ GitHub Secrets** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–¥–ª—è production)
3. **–ë—Ä–∞—É–∑–µ—Ä** –¥–ª—è —Ä—É—á–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
4. **TON –∫–æ—à–µ–ª–µ–∫** —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ Cookies –∏ API Hash

–°–ª–µ–¥—É–π—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ [scripts/README.md](../scripts/README.md) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è:

- `FRAGMENT_COOKIES` - JSON —Å—Ç—Ä–æ–∫–∞ —Å cookies
- `FRAGMENT_API_HASH` - —Å—Ç—Ä–æ–∫–∞ —Å —Ö–µ—à–µ–º API

**–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ https://fragment.com
2. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12 –∏–ª–∏ Cmd+Option+I)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Application/Storage ‚Üí Cookies ‚Üí https://fragment.com
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è cookies: `stel_ssid`, `stel_ton_token`, `stel_token`
5. –ù–∞–π–¥–∏—Ç–µ API hash –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ–∏—Å–∫ `apiUrl`)
6. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. –Ω–∏–∂–µ)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (.env)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
FRAGMENT_COOKIES={"stel_ssid":"–≤–∞—à–µ_–∑–Ω–∞—á–µ–Ω–∏–µ","stel_ton_token":"–≤–∞—à–µ_–∑–Ω–∞—á–µ–Ω–∏–µ","stel_token":"–≤–∞—à–µ_–∑–Ω–∞—á–µ–Ω–∏–µ","stel_dt":"-180"}
FRAGMENT_API_HASH=–≤–∞—à_api_hash
FRAGMENT_MNEMONIC=–≤–∞—à–∞ 24-—Å–ª–æ–≤–Ω–∞—è seed —Ñ—Ä–∞–∑–∞ –∫–æ—à–µ–ª—å–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–±–µ–ª–∞–º–∏
TONCENTER_RPC_URL=https://toncenter.com/api/v2/jsonRPC
TONCENTER_RPC_API_KEY=–≤–∞—à_api_–∫–ª—é—á_–µ—Å–ª–∏_–µ—Å—Ç—å
```

**–í–∞–∂–Ω–æ:**

- `FRAGMENT_COOKIES` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–≤–∞–ª–∏–¥–Ω—ã–º JSON** –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
- –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è cookies –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –∫–∞–≤—ã—á–∫–∞—Ö
- –ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –≤–Ω—É—Ç—Ä–∏ JSON

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞:**

```env
FRAGMENT_COOKIES={"stel_ssid":"b90e83068ca6118b59_16576570205976844396","stel_ton_token":"7edVFHU7VOkhNyr6rBnybHoMdHAobQn2R6GpB5-lCL549jrH1SFdxyNyjbLLFFAYCJIBQHgj-ZiuBALbdk_QPVJPL7zCVr11-QBltxek4Gce8cXBtOQ2gr-ytrshXSINYTX8CGvTwvPVeYpIz4e_vb4ZRR8pgmj2idcbV4Mpgy9kkCCvII62-OMpyhtU4XuZdjv9JBO3","stel_token":"3126b92385460726581efe459d66660b3126b9383126b3f5214ce6c7c4aff2d35c50d","stel_dt":"-180"}
FRAGMENT_API_HASH=58401248c484690e80
```

#### –î–ª—è GitHub Secrets

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions
2. –ù–∞–∂–º–∏—Ç–µ "New repository secret"

**FRAGMENT_COOKIES:**

- Name: `FRAGMENT_COOKIES`
- Value: –í—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å—å JSON (–≤–∫–ª—é—á–∞—è —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏)

**FRAGMENT_API_HASH:**

- Name: `FRAGMENT_API_HASH`
- Value: –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ hash (–±–µ–∑ –∫–∞–≤—ã—á–µ–∫)

**FRAGMENT_MNEMONIC:**

- Name: `FRAGMENT_MNEMONIC`
- Value: –í–∞—à–∞ 24-—Å–ª–æ–≤–Ω–∞—è seed —Ñ—Ä–∞–∑–∞ (—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–±–µ–ª–∞–º–∏)

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

- `TONCENTER_RPC_URL` - URL –¥–ª—è TON Center RPC (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `https://toncenter.com/api/v2/jsonRPC`)
- `TONCENTER_RPC_API_KEY` - API –∫–ª—é—á –¥–ª—è TON Center (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### FRAGMENT_COOKIES

JSON –æ–±—ä–µ–∫—Ç —Å cookies —Å–µ—Å—Å–∏–∏ Fragment.com. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:

- `stel_ssid` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Å—Å–∏–æ–Ω–Ω–∞—è cookie (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `stel_ton_token` - —Ç–æ–∫–µ–Ω –¥–ª—è TON –æ–ø–µ—Ä–∞—Ü–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `stel_token` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- `stel_dt` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è cookie (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### FRAGMENT_API_HASH

–•–µ—à API, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Fragment API. –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã fragment.com.

### FRAGMENT_MNEMONIC

24-—Å–ª–æ–≤–Ω–∞—è seed —Ñ—Ä–∞–∑–∞ TON –∫–æ—à–µ–ª—å–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–∫—É–ø–∫–∏ Stars.

**–í–∞–∂–Ω–æ:** –≠—Ç–æ—Ç –∫–æ—à–µ–ª–µ–∫ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å TON –¥–ª—è –ø–æ–∫—É–ø–∫–∏ Stars.

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Cookies

Cookies –º–æ–≥—É—Ç –∏—Å—Ç–µ—á—å —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è. –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

1. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ [scripts/README.md](../scripts/README.md) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö cookies
2. –û–±–Ω–æ–≤–∏—Ç–µ `FRAGMENT_COOKIES` –∏ `FRAGMENT_API_HASH` –≤ `.env` (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) –∏–ª–∏ –≤ GitHub Secrets (–¥–ª—è production)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª** –≤ git (–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `.gitignore`)
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Secrets** –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ production
3. **–ù–µ –¥–µ–ª–∏—Ç–µ—Å—å cookies** —Å —Ç—Ä–µ—Ç—å–∏–º–∏ –ª–∏—Ü–∞–º–∏
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ cookies** –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### KYC –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ Fragment.com –ø—Ä–æ—à—ë–ª KYC –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
- –ë–µ–∑ KYC –ø–æ–∫—É–ø–∫–∞ Stars –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –Ω–∞ https://fragment.com/kyc/account

### –ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ TON –∫–æ—à–µ–ª—å–∫–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ Stars
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–∫—É–ø–∫–∏: 50 Stars
- –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏ —Å–µ—Ç–∏ TON

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞: "KYC verification required"

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–π–¥–∏—Ç–µ KYC –Ω–∞ https://fragment.com/kyc/account

### –û—à–∏–±–∫–∞: "Cookies are invalid or expired"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞ JSON –≤ `FRAGMENT_COOKIES`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ cookies –Ω–µ –∏—Å—Ç–µ–∫–ª–∏
3. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–µ cookies, —Å–ª–µ–¥—É—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ [scripts/README.md](../scripts/README.md)
4. –û–±–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `.env` –∏–ª–∏ GitHub Secrets

### –û—à–∏–±–∫–∞: "Access denied"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ cookies
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API hash –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–µ cookies –∏ API hash

### –û—à–∏–±–∫–∞: "Failed to extract API hash"

**–†–µ—à–µ–Ω–∏–µ:**

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –Ω–∞ Fragment.com
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö cookies
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É https://fragment.com/stars/buy –∏ –Ω–∞–π—Ç–∏ hash —Ç–∞–º

### –û—à–∏–±–∫–∞: "Insufficient balance"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å TON –∫–æ—à–µ–ª—å–∫–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ—à–µ–ª–µ–∫ (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ mnemonic)

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Fragment.com](https://fragment.com)
- [TON Center API](https://toncenter.com/api/v2)
- [–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é cookies](../scripts/README.md)
